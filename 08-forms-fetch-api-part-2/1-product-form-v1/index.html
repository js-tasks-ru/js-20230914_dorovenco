<!doctype html>
<meta charset="utf-8">
<title>ProductForm</title>

<link rel="stylesheet" href="style.css">

<style>
  #root {
    width: 800px;
    margin: 40px auto;
  }
</style>

<body>

<div id="root"></div>

<script type="module">
  import ProductForm from './index.js';

  const productId = '101-planset-lenovo-tab-p10-tb-x705l-32-gb-3g-lte-belyj';
  // const productForm = new ProductForm(productId);

  const renderForm = async () => {
    await productForm.render();

    productForm.element.addEventListener('product-saved', event => {
      console.error('product-saved', event.detail);
    });

    productForm.element.addEventListener('product-updated', event => {
      console.error('product-updated', event.detail);
    });

    root.append(productForm.element);
  };

  //renderForm();

  let productFormComponent = new ProductForm(productId);

  const element = await productFormComponent.render();

  root.append(productFormComponent.element);

  console.log(productFormComponent.element)// bad - null

  const subcategory = productFormComponent.element.querySelector('#subcategory');

  console.log(subcategory)// bad - null

  const { productForm, imageListContainer } = productFormComponent.subElements;

  // console.log(productForm, imageListContainer) good

  const defaultFormData = {
      title: '',
      description: '',
      quantity: 1,
      subcategory: '',
      status: 1,
      price: 100,
      discount: 0
    };

  const fields = Object.keys(defaultFormData);
  const values = {};

  // console.log(productForm.querySelector(`#title`)) // bad
  // console.log(productForm)
  
  // for (const field of fields) {
  //   console.log(field)
  //   values[field] = productForm.querySelector(`#${field}`).value;
  // }

</script>
</body>


